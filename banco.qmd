---
title: "Explore a Base de Dados"
format: html
execute: 
  enebled: false
---

Acesse o banco completo e realize buscas por:

- Nome da tinta  
- Pigmento  
- Fabricante  
- Tipo de ligante

---

<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
  <input type="text" id="nome" placeholder="Nome da tinta">
  <input type="text" id="pigmento" placeholder="Pigmento">
  <input type="text" id="fabricante" placeholder="Fabricante">

  <select id="ligante">
    <option value="">Ligante</option>
    <option value="Óleo">Óleo</option>
    <option value="Acrílica">Acrílica</option>
  </select>

  <button id="botaoBusca">Pesquisar</button>
</div>

<br>
<div id="resultados"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {

  let dadosTintas = [];

  async function carregarDados() {
    try {
      const response = await fetch("dados/tintas.json");
      dadosTintas = await response.json();
      renderizarResultados(dadosTintas);
    } catch (erro) {
      console.error("Erro ao carregar JSON:", erro);
    }
  }

  function renderizarResultados(lista) {
    const container = document.getElementById("resultados");
    container.innerHTML = "";

    if (!lista || lista.length === 0) {
      container.innerHTML = "<p><em>Nenhum resultado encontrado.</em></p>";
      return;
    }

    lista.forEach(item => {
      const bloco = document.createElement("div");

      bloco.innerHTML = `
        <a href="./tinta.html?id=${item.id}">
          <strong>${item.nome}</strong>
        </a>
        <div>
          Pigmento: ${item.pigmento} |
          Fabricante: ${item.fabricante} |
          Ligante: ${item.ligante}
        </div>
        <hr>
      `;

      container.appendChild(bloco);
    });
  }

  function aplicarFiltro() {
    const nome = document.getElementById("nome").value.toLowerCase();
    const pigmento = document.getElementById("pigmento").value.toLowerCase();
    const fabricante = document.getElementById("fabricante").value.toLowerCase();
    const ligante = document.getElementById("ligante").value;

    const filtrados = dadosTintas.filter(item =>
      item.nome.toLowerCase().includes(nome) &&
      item.pigmento.toLowerCase().includes(pigmento) &&
      item.fabricante.toLowerCase().includes(fabricante) &&
      (ligante === "" || item.ligante === ligante)
    );

    renderizarResultados(filtrados);
  }

  // BOTÃO
  const botao = document.getElementById("botaoBusca");
  botao.addEventListener("click", aplicarFiltro);

  // ENTER nos inputs
  document.querySelectorAll("input").forEach(input => {
    input.addEventListener("keypress", function(e) {
      if (e.key === "Enter") {
        aplicarFiltro();
      }
    });
  });

  carregarDados();
});
</script>







