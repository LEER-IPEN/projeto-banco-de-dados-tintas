---
title: ""
format: html
page-layout: full
execute: 
  enebled: false
toc: false
---
:::: {.container-texto}

# Explore a Base de Dados

Acesse o banco completo e realize buscas por:

- Nome da tinta  
- Pigmento  
- Fabricante
- T√©cnica 
- Tipo de medium

<div class="linha-indice-banco">
  <span>Ou consulte o </span>
  <a href="indice-banco.html" class="btn-indice-banco">
    √çndice Geral
  </a>
</div>

<div class="barra-busca">
  <input type="text" id="busca" placeholder="Pesquise">
  
  <select id="tecnica">
    <option value="">T√©cnica</option>
    <option value="FRX">FRX</option>
    <option value="AAN">AAN</option>
    <option value="RAMAN">RAMAN</option>
    <option value="FTIR">FTIR</option>
  </select>

  <select id="medium">
    <option value="">Medium</option>
    <option value="√ìleo">√ìleo</option>
    <option value="Acr√≠lica">Acr√≠lica</option>
  </select>

  <button id="botaoBusca" class="btn-pesquisa">Pesquisar</button>
</div>

<div id="tituloResultados" class="titulo-resultados" style="display:none;">
  <h2>Resultados</h2>
</div>

<div id="resultados"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {

  let dadosTintas = [];

  async function carregarDados() {
    try {
      const response = await fetch("dados/tintas.json");
      dadosTintas = await response.json();

      // N√ÉO renderiza nada ao carregar
      document.getElementById("resultados").innerHTML = "";
      
    } catch (erro) {
      console.error("Erro ao carregar JSON:", erro);
    }
  }

  function renderizarResultados(lista) {

    const container = document.getElementById("resultados");
    container.innerHTML = "";

    if (!lista || lista.length === 0) {
      container.innerHTML = "<p><em>Nenhum resultado encontrado.</em></p>";
      return;
    }

    // üîπ Ordem desejada
    const ordemTecnicas = ["FRX", "RAMAN", "FTIR", "AAN"];

    ordemTecnicas.forEach(sigla => {

      // Filtra apenas da t√©cnica atual
      const grupo = lista.filter(item => item.tecnica.sigla === sigla);

      if (grupo.length === 0) return;

      // üîπ T√≠tulo da t√©cnica
      const titulo = document.createElement("h3");
      titulo.className = "titulo-tecnica";
      titulo.textContent = sigla;
      container.appendChild(titulo);

      // üîπ Lista das tintas daquela t√©cnica
      grupo.forEach(item => {

        const bloco = document.createElement("a");
        bloco.className = "card-tinta";
        bloco.href = `tinta.html?id=${item.id}`;

        bloco.innerHTML = `
          <div style="display:flex; gap:15px; align-items:center; margin-bottom:15px;">
            <img src="${item.imagem}" class="thumb">

            <div class="info-tinta">
              <div class="titulo-tinta">
                ${item.id} ‚Äî ${item.nome}
              </div>
              <div class="meta">
                T√©cnica: ${item.tecnica.sigla} - ${item.tecnica.nome}<br>
                Pigmento: ${item.pigmento}<br>
                Fabricante: ${item.fabricante}<br>
                Medium: ${item.medium}
              </div>
            </div>
          </div>
        `;

        container.appendChild(bloco);

      });

    });
  }

  function aplicarFiltro() {

    const termo = document.getElementById("busca").value.toLowerCase();
    const tecnicaSelecionada = document.getElementById("tecnica").value;
    const mediumSelecionado = document.getElementById("medium").value;

    if (
      termo === "" &&
      tecnicaSelecionada === "" &&
      mediumSelecionado === ""
    ) {
      document.getElementById("resultados").innerHTML = "";
      document.getElementById("tituloResultados").style.display = "none";
      return;
    }

    const filtrados = dadosTintas.filter(item => {

      const correspondeTexto =
        item.nome.toLowerCase().includes(termo) ||
        item.pigmento.toLowerCase().includes(termo) ||
        item.fabricante.toLowerCase().includes(termo) ||
        item.tecnica.nome.toLowerCase().includes(termo) ||
        item.tecnica.sigla.toLowerCase().includes(termo);

      const correspondeTecnica =
        tecnicaSelecionada === "" ||
        item.tecnica.sigla === tecnicaSelecionada;

      const correspondeMedium =
        mediumSelecionado === "" ||
        item.medium === mediumSelecionado;

      return correspondeTexto && correspondeTecnica && correspondeMedium;
    });

    const titulo = document.getElementById("tituloResultados");

    if (filtrados.length > 0) {
      titulo.style.display = "block";
    } else {
      titulo.style.display = "block"; // continua mostrando mesmo sem resultado
    }

    renderizarResultados(filtrados);
  }

  // BOT√ÉO
  const botao = document.getElementById("botaoBusca");
  botao.addEventListener("click", aplicarFiltro);
  document.getElementById("tecnica").addEventListener("change", aplicarFiltro);
  document.getElementById("medium").addEventListener("change", aplicarFiltro);

  // ENTER nos inputs
  document.getElementById("busca").addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      aplicarFiltro();
    }
  });

  carregarDados();
});

</script>

:::





